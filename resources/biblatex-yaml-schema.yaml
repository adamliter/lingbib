"$schema": "http://json-schema.org/schema#"

title: BiblatexYAMLDatabase
description:
    Schema for a bibliographic database utilizing the Biblatex data model and stored in YAML format.
    Fundamentally similar to a BibTeX format file, but with some extensions.
    Several existing projects support such a format, but there are no standards or schemas available.
type: object

properties:
    people:
        type: object
        additionalProperties: {$ref: "#/definitions/PersonEntry"}

    xdata:
        type: object
        properties:
            additionalProperties: {$ref: "#/definitions/BibEntry"}

    entries:
        type: object
        additionalProperties: {$ref: "#/definitions/BibEntry"}

definitions:
    PersonEntry:
        type: object
        additionalProperties: false
        properties:
            first: {type: string}
            middle: {type: string}
            last: {type: string}
            lineage: {type: string}
            url: {type: string}
            orcid: {type: string}

    PersonList:
        type: array
        items: {$ref: "#/definitions/PersonEntry"}

    EntryType:
        type: string
        enum:
            - article
            - book
            - mvbook
            - thesis
            - xdata

    BibEntry:
        type: object
        # additionalProperties: false
        properties:
            type: {$ref: "#/definitions/EntryType"}

            #biblatex fields
            abstract: {type: string}
            author: {$ref: "#/definitions/PersonList"}
            crossref: {type: string}
            date: {type: string}
            doi: {type: string}
            editor: {$ref: "#/definitions/PersonList"}
            eprint: {type: string}
            eprinttype: {type: string}
            ids: {type: string}
            indexsorttitle: {type: string}
            indextitle: {type: string}
            institution: {type: string}
            isbn: {type: string}
            issn: {type: string}
            issue: {type: string}
            issuesubtitle: {type: string}
            issuetitle: {type: string}
            journalsubtitle: {type: string}
            journaltitle: {type: string}
            keywords: {type: string}
            langid: {type: string}
            location: {type: string}
            mainsubtitle: {type: string}
            maintitle: {type: string}
            number: {type: string}
            pages: {type: string}
            publisher: {type: string}
            series: {type: string}
            shortjournal: {type: string}
            shorttitle: {type: string}
            sortname: {$ref: "#/definitions/PersonList"}
            subtitle: {type: string}
            title: {type: string}
            volume: {type: string}
            xdata: {type: string}

            # lingbib-specific fields
            citekey: {type: string}
            keyoverride: {type: string}
            titlekeyword: {type: string}
            xdatatype:
                type: string
                enum:
                    - institution
                    - periodical
                    - periodical_issue
                    - publisher
